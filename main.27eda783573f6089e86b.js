(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,o){t.exports=o("zUnb")},zUnb:function(t,e,o){"use strict";o.r(e);var i=o("fXoL"),n=o("jhN1"),r=o("R1ws"),s=o("3Pt+"),c=o("tk/3"),a=o("5eHb"),b=o("tyNb");let u=(()=>{class t{constructor(){this.rootURL="https://api.devfyxt.com/v1",this.isEnvironment="dev",this.doLogin="/authentication/login",this.checkDemoJobs="/authentication/demojobs"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),l=(()=>{class t{constructor(t,e,o){this._Config=t,this._http=e,this.router=o,this.currentUserInfo={},this.allAccounts=[],this.loading=!1}doGET(t,e){return"dev"!=this._Config.isEnvironment&&(t.includes("https:")||(t=t.replace("http://","https://"))),this._http.get(t,e)}doPOST(t,e,o){return this._http.post(t,e,o)}doPUT(t,e,o){return this._http.put(t,e,o)}doDelete(t,e){return this._http.delete(t,e)}doPatch(t,e,o){return this._http.patch(t,e,o)}commonHeaders(t){return{headers:new c.c({"Content-Type":"application/json"})}}singleSigninHeaders(t,e){if(t&&e)return{headers:new c.c({"Customer-ID":e,"Content-Type":"application/json",Authorization:"token "+t})}}redirectTo(t){this.router.navigate([t])}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(u),i.Rb(c.a),i.Rb(b.a))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),d=(()=>{class t{constructor(t){this.toastr=t}showSuccess(t,e){this.toastr.success(e,t)}showError(t,e){this.toastr.error(e,t)}showWarning(t,e){this.toastr.warning(e,t)}showInfo(t,e){this.toastr.info(e,t)}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(a.b))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=o("ofXK");let m=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["app-loader"]],decls:2,vars:0,consts:[[1,"loading"]],template:function(t,e){1&t&&(i.Nb(0,"div",0),i.hc(1,"Loading\u2026"),i.Mb())},styles:['.loading[_ngcontent-%COMP%]{z-index:99999999;height:2em;width:2em;overflow:visible;margin:auto;bottom:0;right:0}.loading[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]:before{position:fixed;top:0;left:0}.loading[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.loading[_ngcontent-%COMP%]:not(:required){font:0/0 a;color:transparent;text-shadow:none;background-color:initial;border:0}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:1em;height:1em;margin-top:-.5em;animation:spinner 1.5s linear infinite;border-radius:.5em;box-shadow:1.5em 0 0 0 rgba(0,0,0,.75),1.1em 1.1em 0 0 rgba(0,0,0,.75),0 1.5em 0 0 rgba(0,0,0,.75),-1.1em 1.1em 0 0 rgba(0,0,0,.75),-1.5em 0 0 0 rgba(0,0,0,.75),-1.1em -1.1em 0 0 rgba(0,0,0,.75),0 -1.5em 0 0 rgba(0,0,0,.75),1.1em -1.1em 0 0 rgba(0,0,0,.75)}@keyframes spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}']}),t})();function g(t,e){1&t&&i.Jb(0,"app-loader")}function f(t,e){1&t&&(i.Nb(0,"div"),i.hc(1,"Email is required"),i.Mb())}function p(t,e){1&t&&(i.Nb(0,"div"),i.hc(1,"Email must be a valid email address"),i.Mb())}function v(t,e){if(1&t&&(i.Nb(0,"div",19),i.gc(1,f,2,0,"div",0),i.gc(2,p,2,0,"div",0),i.Mb()),2&t){const t=i.Wb();i.xb(1),i.Xb("ngIf",t.f.username.errors.required),i.xb(1),i.Xb("ngIf",t.f.username.errors.username)}}function _(t,e){1&t&&(i.Nb(0,"div"),i.hc(1,"Password is required"),i.Mb())}function w(t,e){1&t&&(i.Nb(0,"div"),i.hc(1,"Password must be at least 6 characters"),i.Mb())}function M(t,e){if(1&t&&(i.Nb(0,"div",19),i.gc(1,_,2,0,"div",0),i.gc(2,w,2,0,"div",0),i.Mb()),2&t){const t=i.Wb();i.xb(1),i.Xb("ngIf",t.f.password.errors.required),i.xb(1),i.Xb("ngIf",t.f.password.errors.minlength)}}const S=function(t){return{"is-invalid":t}};let N=(()=>{class t{constructor(t,e,o,i){this.formBuilder=t,this._Config=e,this._authService=o,this._utilityService=i,this.submitted=!1}ngOnInit(){this.init()}init(){this.LoginForm=this.formBuilder.group({username:["",[s.i.required,s.i.email]],password:["",[s.i.required,s.i.minLength(6)]]})}get f(){return this.LoginForm.controls}onLoginSubmit(){if(this.submitted=!0,this.LoginForm.invalid)return;let t=this.LoginForm.value;this._authService.loading=!0;let e=this._Config.rootURL+this._Config.doLogin,o=this._authService.commonHeaders();this._authService.doPOST(e,t,o).subscribe(t=>{if(t.success){let e=t.data;if(e.user){this._authService.allAccounts=e.sub_domains,localStorage.setItem("userSubDomains",JSON.stringify(this._authService.allAccounts));let t=e.user;t.name=e.user?e.user.user.first_name+" "+e.user.user.last_name:"",this._authService.currentUserInfo=t,this._authService.redirectTo("accounts"),this._utilityService.showSuccess("","logged in successfully.")}}this._authService.loading=!1},t=>{this._authService.loading=!1,this._utilityService.showError("",t.error.message)})}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(s.b),i.Ib(u),i.Ib(l),i.Ib(d))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-login"]],decls:25,vars:10,consts:[[4,"ngIf"],["role","main",1,"flex-shrink-0"],[1,"container","mtop_login"],[1,"row"],[1,"col-md-5","mt-1","mx-auto"],[1,"col-md-12","text-center"],["src","../../assets/images/logo.png","alt","Fyxt Logo",1,"text-center"],[1,"card","mt-5"],[1,"card-body"],[1,"text-center"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","formControlName","password","name","password",1,"form-control",3,"ngClass"],[1,"col-md-6","mx-auto"],["type","submit",1,"btn","btn-block","navitem-btn"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(i.gc(0,g,1,0,"app-loader",0),i.Nb(1,"main",1),i.Nb(2,"div",2),i.Nb(3,"div",3),i.Nb(4,"div",4),i.Nb(5,"div",5),i.Jb(6,"img",6),i.Mb(),i.Nb(7,"div",7),i.Nb(8,"div",8),i.Nb(9,"h2",9),i.hc(10,"Login"),i.Mb(),i.Nb(11,"form",10),i.Ub("ngSubmit",(function(){return e.onLoginSubmit()})),i.Nb(12,"div",11),i.Nb(13,"label",12),i.hc(14,"Email address"),i.Mb(),i.Jb(15,"input",13),i.gc(16,v,3,2,"div",14),i.Mb(),i.Nb(17,"div",11),i.Nb(18,"label",15),i.hc(19,"Password"),i.Mb(),i.Jb(20,"input",16),i.gc(21,M,3,2,"div",14),i.Mb(),i.Nb(22,"div",17),i.Nb(23,"button",18),i.hc(24,"Submit"),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb()),2&t&&(i.Xb("ngIf",e._authService.loading),i.xb(11),i.Xb("formGroup",e.LoginForm),i.xb(4),i.Xb("ngClass",i.Yb(6,S,e.submitted&&e.f.username.errors)),i.xb(1),i.Xb("ngIf",e.submitted&&e.f.username.errors),i.xb(4),i.Xb("ngClass",i.Yb(8,S,e.submitted&&e.f.password.errors)),i.xb(1),i.Xb("ngIf",e.submitted&&e.f.password.errors))},directives:[h.j,s.j,s.g,s.d,s.a,s.f,s.c,h.h,m],styles:[""]}),t})();function x(t,e){1&t&&i.Jb(0,"app-loader")}function y(t,e){if(1&t&&(i.Nb(0,"p",20),i.hc(1),i.Mb()),2&t){const t=i.Wb().$implicit,e=i.Wb();i.xb(1),i.ic(e.extractHostname(t.redirect_link))}}function I(t,e){if(1&t){const t=i.Ob();i.Lb(0),i.Nb(1,"div",12),i.Nb(2,"div",13),i.Nb(3,"div",14),i.Nb(4,"div",5),i.Nb(5,"div",15),i.Nb(6,"h5"),i.Nb(7,"a",16),i.Ub("click",(function(){i.ac(t);const o=e.$implicit;return i.Wb().LaunchToDashboard(o.redirect_link)})),i.hc(8),i.Mb(),i.Mb(),i.gc(9,y,2,1,"p",17),i.Mb(),i.Nb(10,"div",18),i.Nb(11,"button",19),i.Ub("click",(function(){i.ac(t);const o=e.$implicit;return i.Wb().LaunchToDashboard(o.redirect_link)})),i.hc(12,"Launch"),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Mb(),i.Kb()}if(2&t){const t=e.$implicit;i.xb(8),i.ic(t.domain_name),i.xb(1),i.Xb("ngIf",t.redirect_link)}}const k=[{path:"",component:N},{path:"login",component:N},{path:"accounts",component:(()=>{class t{constructor(t,e){this._Config=t,this._authService=e}ngOnInit(){this._authService.allAccounts=localStorage.getItem("userSubDomains")?JSON.parse(localStorage.getItem("userSubDomains")):[],0===this._authService.allAccounts.length&&this._authService.redirectTo("")}extractHostname(t){return(t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0]).split(":")[0].split("?")[0]}LaunchToDashboard(t){this._authService.currentUserInfo.is_first_time_login?this.activateDemoTicket(t):window.location.href=t,localStorage.clear()}activateDemoTicket(t){let e=window.location.hostname.split(".")[0];"localhost"==e&&(e=this._Config.isEnvironment);let o=localStorage.getItem("userTokenPM");this._authService.loading=!0;let i=this._Config.rootURL+this._Config.checkDemoJobs,n=this._authService.singleSigninHeaders(o,e);this._authService.doPOST(i,{},n).subscribe(e=>{e.success&&(window.location.href=t),this._authService.loading=!1},t=>{console.log(t),this._authService.loading=!1})}logout(){this._authService.redirectTo(""),localStorage.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(u),i.Ib(l))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-accounts"]],decls:14,vars:2,consts:[[4,"ngIf"],[1,"row","m-3"],[1,"col-md-12","text-center"],["src","../../assets/images/logo.png","alt","Fyxt Logo",1,"text-center"],[1,"container","mt-3"],[1,"row"],[1,"col-md-9","mx-auto"],[1,"text-center"],[1,"people-nearby","mt-5"],[4,"ngFor","ngForOf"],[1,"col-md-12","mt-5","text-center"],["routerLink","/",1,"btn","btn-danger","mt-2"],[1,"card","mt-2"],[1,"card-body","p-2"],[1,"nearby-user"],[1,"col-md-9"],["href","javascript:void();",1,"profile-link",3,"click"],["class","mb-0 font-weight-bold",4,"ngIf"],[1,"col-md-3"],[1,"btn","navitem-btn","pull-right","mt-2",3,"click"],[1,"mb-0","font-weight-bold"]],template:function(t,e){1&t&&(i.gc(0,x,1,0,"app-loader",0),i.Nb(1,"div",1),i.Nb(2,"div",2),i.Jb(3,"img",3),i.Mb(),i.Mb(),i.Nb(4,"div",4),i.Nb(5,"div",5),i.Nb(6,"div",6),i.Nb(7,"h2",7),i.hc(8,"You\u2019re already signed in to\u2026"),i.Mb(),i.Nb(9,"div",8),i.gc(10,I,13,2,"ng-container",9),i.Mb(),i.Mb(),i.Nb(11,"div",10),i.Nb(12,"a",11),i.hc(13,"Logout"),i.Mb(),i.Mb(),i.Mb(),i.Mb()),2&t&&(i.Xb("ngIf",e._authService.loading),i.xb(10),i.Xb("ngForOf",e._authService.allAccounts))},directives:[h.j,h.i,b.b,m],styles:[""]}),t})()},{path:"**",redirectTo:"login",pathMatch:"full"}];let C=(()=>{class t{}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},imports:[[b.c.forRoot(k)],b.c]}),t})(),L=(()=>{class t{constructor(){this.title="Fyxt"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&i.Jb(0,"router-outlet")},directives:[b.d],styles:[""]}),t})(),O=(()=>{class t{}return t.\u0275mod=i.Gb({type:t,bootstrap:[L]}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},providers:[],imports:[[n.a,r.a,C,s.e,s.h,c.b,a.a.forRoot({timeOut:2e3,positionClass:"toast-top-right",preventDuplicates:!0})]]}),t})();Object(i.R)(),n.c().bootstrapModule(O).catch(t=>console.error(t))},zn8P:function(t,e){function o(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}o.keys=function(){return[]},o.resolve=o,t.exports=o,o.id="zn8P"}},[[0,0,4]]]);